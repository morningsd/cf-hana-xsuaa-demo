---
applications:

- name: firstapp
  memory: 1500M
  timeout: 300
  random-route: true
  path: application/target/firstapp-application.jar
  buildpacks:
    - sap_java_buildpack
  env:
    TARGET_RUNTIME: main
    SPRING_PROFILES_ACTIVE: 'cloud'
    JBP_CONFIG_SAPJVM_MEMORY_SIZES: 'metaspace:128m..'
    JBP_CONFIG_COMPONENTS: "jres: ['com.sap.xs.java.buildpack.jdk.SAPMachineJDK']"
  services:
  - xsuaa-instance
#  - my-xsuaa
#  - my-destination
#  - my-connectivity


- name: firstapp-approuter
  routes:
      # firstapp-quick-parrot-sq.cfapps.us10.hana.ondemand.com
    - route: firstapp-approuter-trial2-hg876227.cfapps.us10.hana.ondemand.com
  path: /
  memory: 128M
  buildpacks:
    - nodejs_buildpack
  env:
    TENANT_HOST_PATTERN: 'firstapp-approuter-(.*).cfapps.sap.hana.ondemand.com'
    destinations: '[{"name":"dest-firstapp", "url" :"https://firstapp-approuter-trial2-hg876227.cfapps.us10.hana.ondemand.com", "forwardAuthToken": true}]'
  services:
    - xsuaa-instance
